

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hand Controlled Cube</title>
    <style>
        body { margin: 0; overflow: hidden; display: flex; font-family: Arial, sans-serif; }
        #webcam-container { flex: 1; padding: 20px; background-color: #f0f0f0; }
        #cube-container { flex: 1; background-color: #e0e0e0; display: flex; justify-content: center; align-items: center; }
        video { width: 100%; max-width: 640px; height: auto; border: 1px solid #ccc; }
        #data-display { margin-top: 20px; font-size: 1.2em; }
        /* Placeholder for cube styling */
        #cube-placeholder {
            width: 200px;
            height: 200px;
            background-color: #3498db;
            border: 2px solid #2980b9;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5em;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="webcam-container">
        <h2>Webcam Feed (from your local machine)</h2>
        <video id="webcamFeed" autoplay playsinline></video>
        <div id="data-display">
            <h3>Hand Data:</h3>
            <p>X: <span id="handX">0</span></p>
            <p>Y: <span id="handY">0</span></p>
        </div>
        <p>
            Note: The actual webcam feed needs to be enabled by your browser.
            The hand tracking logic runs in the Python script on your machine,
            and sends data to this web server.
        </p>
    </div>
    <div id="cube-container">
        <h2>3D Cube (Placeholder)</h2>
        <div id="cube-placeholder">
            3D Cube Placeholder<br>
            (Integrate Three.js/Babylon.js here)
        </div>
        <p>
            To make the cube interactive, you would integrate a JavaScript 3D library
            (like Three.js or Babylon.js) here. The hand data from the Python backend
            would then be used to control the cube's position, rotation, or scale.
        </p>
    </div>

    <script>
        // Request access to webcam (for local display in browser)
        const webcamFeed = document.getElementById('webcamFeed');
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function(stream) {
                    webcamFeed.srcObject = stream;
                })
                .catch(function(error) {
                    console.error("Error accessing webcam: ", error);
                    alert("Could not access webcam. Please ensure it's connected and permissions are granted.");
                });
        } else {
            alert("getUserMedia is not supported by your browser.");
        }

        // Fetch hand data from Flask backend
        async function fetchHandData() {
            try {
                const response = await fetch('http://localhost:53102/get_hand_data'); // Use the assigned port
                const data = await response.json();
                document.getElementById('handX').textContent = data.x;
                document.getElementById('handY').textContent = data.y;

                // CUBE CONTROL LOGIC (CLIENT-SIDE JAVASCRIPT)
                // Here you would update your 3D cube's properties based on data.x and data.y
                // Example (conceptual):
                // if (window.myCube) {
                //     myCube.position.x = data.x * some_scale_factor;
                //     myCube.position.y = data.y * some_scale_factor;
                // }

            } catch (error) {
                console.error("Error fetching hand data:", error);
            }
        }

        // Fetch data every 100ms
        setInterval(fetchHandData, 100);
    </script>
</body>
</html>

